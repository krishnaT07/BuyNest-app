"use client";
import{c as re,af as Te,q as ue,r as l,G as me,j as e,v as z,t as O,_ as Be,P as A,Q as Le,O as Ve,a1 as he,K as ze,H as Oe,w as He,a0 as Ke,ag as Fe,ah as $e,ai as Ue,a5 as Ge,B as k,T as qe,aj as Ye,I as Qe,i as Y,k as Xe,l as We,ak as Je,n as Q,a9 as X,aa as W,ab as J,ac as Z,ad as R,L as ee,f as de,o as Ze,p as et,g as tt}from"./index-C7_V5JWq.js";import{H as st}from"./Header-LcFRmaEJ.js";import{u as nt}from"./useProducts-Ccz9LixC.js";import{S as rt}from"./search-Dc1MRoi3.js";import"./index-Mkei7zYV.js";import"./settings-JGNURzKf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=re("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=re("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var pe=["PageUp","PageDown"],fe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},K="Slider",[te,lt,ct]=Te(K),[ge,Ot]=ue(K,[ct]),[dt,U]=ge(K),ve=l.forwardRef((t,s)=>{const{name:n,min:r=0,max:o=100,step:u=1,orientation:i="horizontal",disabled:c=!1,minStepsBetweenThumbs:m=0,defaultValue:f=[r],value:x,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:b=!1,form:y,...g}=t,v=l.useRef(new Set),p=l.useRef(0),S=i==="horizontal"?ut:mt,[j=[],I]=me({prop:x,defaultProp:f,onChange:w=>{var E;(E=[...v.current][p.current])==null||E.focus(),d(w)}}),M=l.useRef(j);function H(w){const P=gt(j,w);T(w,P)}function F(w){T(w,p.current)}function q(){const w=M.current[p.current];j[p.current]!==w&&h(j)}function T(w,P,{commit:E}={commit:!1}){const B=yt(u),L=Nt(Math.round((w-r)/u)*u+r,B),V=he(L,[r,o]);I((_=[])=>{const C=ft(_,V,P);if(jt(C,m*u)){p.current=C.indexOf(V);const a=String(C)!==String(_);return a&&E&&h(C),a?C:_}else return _})}return e.jsx(dt,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:o,valueIndexToChangeRef:p,thumbs:v.current,values:j,orientation:i,form:y,children:e.jsx(te.Provider,{scope:t.__scopeSlider,children:e.jsx(te.Slot,{scope:t.__scopeSlider,children:e.jsx(S,{"aria-disabled":c,"data-disabled":c?"":void 0,...g,ref:s,onPointerDown:z(g.onPointerDown,()=>{c||(M.current=j)}),min:r,max:o,inverted:b,onSlideStart:c?void 0:H,onSlideMove:c?void 0:F,onSlideEnd:c?void 0:q,onHomeKeyDown:()=>!c&&T(r,0,{commit:!0}),onEndKeyDown:()=>!c&&T(o,j.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:P})=>{if(!c){const L=pe.includes(w.key)||w.shiftKey&&fe.includes(w.key)?10:1,V=p.current,_=j[V],C=u*L*P;T(_+C,V,{commit:!0})}}})})})})});ve.displayName=K;var[be,je]=ge(K,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ut=l.forwardRef((t,s)=>{const{min:n,max:r,dir:o,inverted:u,onSlideStart:i,onSlideMove:c,onSlideEnd:m,onStepKeyDown:f,...x}=t,[d,h]=l.useState(null),b=O(s,S=>h(S)),y=l.useRef(void 0),g=Be(o),v=g==="ltr",p=v&&!u||!v&&u;function N(S){const j=y.current||d.getBoundingClientRect(),I=[0,j.width],H=ae(I,p?[n,r]:[r,n]);return y.current=j,H(S-j.left)}return e.jsx(be,{scope:t.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:e.jsx(ye,{dir:g,"data-orientation":"horizontal",...x,ref:b,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const j=N(S.clientX);i==null||i(j)},onSlideMove:S=>{const j=N(S.clientX);c==null||c(j)},onSlideEnd:()=>{y.current=void 0,m==null||m()},onStepKeyDown:S=>{const I=xe[p?"from-left":"from-right"].includes(S.key);f==null||f({event:S,direction:I?-1:1})}})})}),mt=l.forwardRef((t,s)=>{const{min:n,max:r,inverted:o,onSlideStart:u,onSlideMove:i,onSlideEnd:c,onStepKeyDown:m,...f}=t,x=l.useRef(null),d=O(s,x),h=l.useRef(void 0),b=!o;function y(g){const v=h.current||x.current.getBoundingClientRect(),p=[0,v.height],S=ae(p,b?[r,n]:[n,r]);return h.current=v,S(g-v.top)}return e.jsx(be,{scope:t.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:e.jsx(ye,{"data-orientation":"vertical",...f,ref:d,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=y(g.clientY);u==null||u(v)},onSlideMove:g=>{const v=y(g.clientY);i==null||i(v)},onSlideEnd:()=>{h.current=void 0,c==null||c()},onStepKeyDown:g=>{const p=xe[b?"from-bottom":"from-top"].includes(g.key);m==null||m({event:g,direction:p?-1:1})}})})}),ye=l.forwardRef((t,s)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:u,onHomeKeyDown:i,onEndKeyDown:c,onStepKeyDown:m,...f}=t,x=U(K,n);return e.jsx(A.span,{...f,ref:s,onKeyDown:z(t.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):pe.concat(fe).includes(d.key)&&(m(d),d.preventDefault())}),onPointerDown:z(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),x.thumbs.has(h)?h.focus():r(d)}),onPointerMove:z(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:z(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),u(d))})})}),Ne="SliderTrack",Se=l.forwardRef((t,s)=>{const{__scopeSlider:n,...r}=t,o=U(Ne,n);return e.jsx(A.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:s})});Se.displayName=Ne;var se="SliderRange",we=l.forwardRef((t,s)=>{const{__scopeSlider:n,...r}=t,o=U(se,n),u=je(se,n),i=l.useRef(null),c=O(s,i),m=o.values.length,f=o.values.map(h=>Re(h,o.min,o.max)),x=m>1?Math.min(...f):0,d=100-Math.max(...f);return e.jsx(A.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:c,style:{...t.style,[u.startEdge]:x+"%",[u.endEdge]:d+"%"}})});we.displayName=se;var ne="SliderThumb",Ce=l.forwardRef((t,s)=>{const n=lt(t.__scopeSlider),[r,o]=l.useState(null),u=O(s,c=>o(c)),i=l.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return e.jsx(ht,{...t,ref:u,index:i})}),ht=l.forwardRef((t,s)=>{const{__scopeSlider:n,index:r,name:o,...u}=t,i=U(ne,n),c=je(ne,n),[m,f]=l.useState(null),x=O(s,N=>f(N)),d=m?i.form||!!m.closest("form"):!0,h=Le(m),b=i.values[r],y=b===void 0?0:Re(b,i.min,i.max),g=xt(r,i.values.length),v=h==null?void 0:h[c.size],p=v?vt(v,y,c.direction):0;return l.useEffect(()=>{if(m)return i.thumbs.add(m),()=>{i.thumbs.delete(m)}},[m,i.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${y}% + ${p}px)`},children:[e.jsx(te.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(A.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":b,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...u,ref:x,style:b===void 0?{display:"none"}:t.style,onFocus:z(t.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&e.jsx(ke,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:b},r)]})});Ce.displayName=ne;var pt="RadioBubbleInput",ke=l.forwardRef(({__scopeSlider:t,value:s,...n},r)=>{const o=l.useRef(null),u=O(o,r),i=Ve(s);return l.useEffect(()=>{const c=o.current;if(!c)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"value").set;if(i!==s&&x){const d=new Event("input",{bubbles:!0});x.call(c,s),c.dispatchEvent(d)}},[i,s]),e.jsx(A.input,{style:{display:"none"},...n,ref:u,defaultValue:s})});ke.displayName=pt;function ft(t=[],s,n){const r=[...t];return r[n]=s,r.sort((o,u)=>o-u)}function Re(t,s,n){const u=100/(n-s)*(t-s);return he(u,[0,100])}function xt(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function gt(t,s){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-s)),r=Math.min(...n);return n.indexOf(r)}function vt(t,s,n){const r=t/2,u=ae([0,50],[0,r]);return(r-u(s)*n)*n}function bt(t){return t.slice(0,-1).map((s,n)=>t[n+1]-s)}function jt(t,s){if(s>0){const n=bt(t);return Math.min(...n)>=s}return!0}function ae(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function yt(t){return(String(t).split(".")[1]||"").length}function Nt(t,s){const n=Math.pow(10,s);return Math.round(t*n)/n}var Pe=ve,St=Se,wt=we,Ct=Ce;const De=l.forwardRef(({className:t,...s},n)=>e.jsxs(Pe,{ref:n,className:ze("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(St,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(wt,{className:"absolute h-full bg-primary"})}),e.jsx(Ct,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));De.displayName=Pe.displayName;var G="Collapsible",[kt,Ht]=ue(G),[Rt,oe]=kt(G),Me=l.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:u,onOpenChange:i,...c}=t,[m,f]=me({prop:r,defaultProp:o??!1,onChange:i,caller:G});return e.jsx(Rt,{scope:n,disabled:u,contentId:Oe(),open:m,onOpenToggle:l.useCallback(()=>f(x=>!x),[f]),children:e.jsx(A.div,{"data-state":le(m),"data-disabled":u?"":void 0,...c,ref:s})})});Me.displayName=G;var Ee="CollapsibleTrigger",_e=l.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,o=oe(Ee,n);return e.jsx(A.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":le(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:s,onClick:z(t.onClick,o.onOpenToggle)})});_e.displayName=Ee;var ie="CollapsibleContent",Ae=l.forwardRef((t,s)=>{const{forceMount:n,...r}=t,o=oe(ie,t.__scopeCollapsible);return e.jsx(He,{present:n||o.open,children:({present:u})=>e.jsx(Pt,{...r,ref:s,present:u})})});Ae.displayName=ie;var Pt=l.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:o,...u}=t,i=oe(ie,n),[c,m]=l.useState(r),f=l.useRef(null),x=O(s,f),d=l.useRef(0),h=d.current,b=l.useRef(0),y=b.current,g=i.open||c,v=l.useRef(g),p=l.useRef(void 0);return l.useEffect(()=>{const N=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(N)},[]),Ke(()=>{const N=f.current;if(N){p.current=p.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const S=N.getBoundingClientRect();d.current=S.height,b.current=S.width,v.current||(N.style.transitionDuration=p.current.transitionDuration,N.style.animationName=p.current.animationName),m(r)}},[i.open,r]),e.jsx(A.div,{"data-state":le(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...u,ref:x,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:g&&o})});function le(t){return t?"open":"closed"}var Dt=Me;const Mt=Dt,Et=_e,_t=Ae,At=["All Categories","Grocery","Electronics","Clothing","Food & Drinks","Health & Beauty","Home & Garden","Sports","Books"],Kt=()=>{const[t]=Fe(),s=t.get("q")||"",{deliveryMode:n,setDeliveryMode:r}=$e(),[o,u]=l.useState(s),[i,c]=l.useState("All Categories"),[m,f]=l.useState([0,1e4]),[x,d]=l.useState("relevance"),[h,b]=l.useState("grid"),[y,g]=l.useState("shops"),[v,p]=l.useState(!1),[N,S]=l.useState(!1),[j,I]=l.useState(null),[M,H]=l.useState([]),{shops:F,loading:q,error:T}=Ue({category:i,searchQuery:o,sortBy:x}),{products:w,loading:P,error:E}=nt({category:i,searchQuery:o,priceRange:m,sortBy:x}),B=y==="shops"?q:P,L=y==="shops"?T:E,{addToCart:V}=Ge(),_=()=>{u(o)},C=a=>`₹${a.toLocaleString()}`;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-primary/5 to-accent/5",children:[e.jsx(st,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-primary bg-clip-text text-transparent",children:s?`Search results for "${s}"`:"Browse Local Shops"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Discover amazing local businesses in your area"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-muted to-muted/50 p-1.5 rounded-xl shadow-soft border border-border/50",children:[e.jsxs(k,{variant:n==="delivery"?"default":"ghost",size:"sm",onClick:()=>r("delivery"),className:"flex items-center gap-2 rounded-lg hover:scale-105 transition-transform",children:[e.jsx(qe,{className:"h-4 w-4"}),"Delivery"]}),e.jsxs(k,{variant:n==="pickup"?"default":"ghost",size:"sm",onClick:()=>r("pickup"),className:"flex items-center gap-2 rounded-lg hover:scale-105 transition-transform",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Pickup"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-2xl",children:[e.jsx(rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Qe,{type:"text",placeholder:"Search shops or products...",value:o,onChange:a=>u(a.target.value),className:"pl-10"})]}),e.jsx(k,{variant:"default",onClick:_,children:"Search"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Mt,{open:v,onOpenChange:p,children:e.jsxs(Y,{className:"shadow-soft border-primary/10 hover:shadow-strong transition-shadow",children:[e.jsx(Et,{asChild:!0,children:e.jsx(Xe,{className:"bg-gradient-to-br from-primary/5 to-transparent cursor-pointer hover:bg-primary/10 transition-colors",children:e.jsxs(We,{className:"flex items-center justify-between text-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5 text-primary"}),"Filters"]}),e.jsx(Je,{className:`h-5 w-5 text-muted-foreground transition-transform ${v?"rotate-180":""}`})]})})}),e.jsx(_t,{children:e.jsxs(Q,{className:"space-y-6 pt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Category"}),e.jsxs(X,{value:i,onValueChange:c,children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsx(Z,{children:At.map(a=>e.jsx(R,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-3 block",children:["Price Range: ",C(m[0])," - ",C(m[1])]}),e.jsx(De,{value:m,onValueChange:f,max:1e4,min:0,step:100,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Sort By"}),e.jsxs(X,{value:x,onValueChange:d,children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Z,{children:[e.jsx(R,{value:"relevance",children:"Relevance"}),e.jsx(R,{value:"rating",children:"Highest Rated"}),e.jsx(R,{value:"distance",children:"Nearest First"}),e.jsx(R,{value:"delivery-time",children:"Fastest Delivery"}),e.jsx(R,{value:"price-low",children:"Price: Low to High"}),e.jsx(R,{value:"price-high",children:"Price: High to Low"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Availability"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"instock",type:"checkbox",checked:N,onChange:a=>S(a.target.checked)}),e.jsx("label",{htmlFor:"instock",className:"text-sm",children:"In stock only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Minimum Rating"}),e.jsxs(X,{value:j?String(j):"",onValueChange:a=>I(a?Number(a):null),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Any"})}),e.jsxs(Z,{children:[e.jsx(R,{value:"",children:"Any"}),e.jsx(R,{value:"3",children:"3★ & up"}),e.jsx(R,{value:"4",children:"4★ & up"})]})]})]}),e.jsx(k,{variant:"outline",className:"w-full",onClick:()=>{c("All Categories"),f([0,1e4]),d("relevance")},children:"Clear Filters"})]})})]})})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsxs(k,{variant:y==="shops"?"default":"ghost",size:"sm",onClick:()=>g("shops"),className:"rounded-md",children:["Shops (",B?"...":F.length,")"]}),e.jsxs(k,{variant:y==="products"?"default":"ghost",size:"sm",onClick:()=>g("products"),className:"rounded-md",children:["Products (",B?"...":w.length,")"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 bg-muted p-1 rounded-lg",children:[e.jsx(k,{variant:h==="grid"?"default":"ghost",size:"sm",onClick:()=>b("grid"),children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx(k,{variant:h==="list"?"default":"ghost",size:"sm",onClick:()=>b("list"),children:e.jsx(it,{className:"h-4 w-4"})})]})})]}),B&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]}),L&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-destructive mb-4",children:L}),e.jsx(k,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]}),!B&&!L&&e.jsx(e.Fragment,{children:y==="shops"?e.jsx("div",{className:h==="grid"?"grid md:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4",children:F.length===0?e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No shops found matching your criteria."})}):F.map(a=>{var $,D;return e.jsx(ee,{to:`/shops/${a.id}`,children:e.jsxs(Y,{className:"overflow-hidden hover:shadow-strong hover:-translate-y-1 transition-all cursor-pointer border-primary/10 bg-gradient-to-br from-card to-muted/30 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.imageUrl||"/images/shops/default-shop.jpg",alt:a.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 to-transparent opacity-0 hover:opacity-100 transition-opacity"}),e.jsx(de,{className:"absolute top-3 left-3 bg-gradient-primary text-white shadow-soft",children:(($=a.categories)==null?void 0:$[0])||"Shop"})]}),e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:a.rating})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(et,{className:"h-4 w-4"}),n==="pickup"?"Ready for pickup":a.deliveryTime]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"h-4 w-4"}),((D=a.address)==null?void 0:D.split(",")[0])||"Location"]})]}),e.jsx(de,{variant:"outline",className:"mt-2",children:n==="pickup"?"Pickup Available":"Delivery Available"})]})})]})},a.id)})}):e.jsx("div",{className:h==="grid"?"grid md:grid-cols-2 xl:grid-cols-3 gap-6":"space-y-4",children:w.length===0?e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No products found matching your criteria."})}):w.filter(a=>!N||a.inStock).filter(a=>!0).map(a=>{var $;return e.jsxs(Y,{className:"overflow-hidden hover:shadow-strong hover:-translate-y-1 transition-all cursor-pointer border-primary/10 bg-gradient-to-br from-card to-muted/30 animate-fade-in group",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:a.imageUrl||"/images/products/default-product.jpg",alt:a.name,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-300",loading:"lazy",decoding:"async",onError:D=>{D.currentTarget.src="/images/products/default-product.jpg"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx(Q,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{to:`/products/${a.id}`,className:"font-semibold hover:text-primary transition-colors",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(($=a.shops)==null?void 0:$.name)||"Shop"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:C(Number(a.price))}),a.originalPrice&&e.jsx("span",{className:"text-sm text-muted-foreground line-through",children:C(Number(a.originalPrice))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"bg-gradient-primary hover:opacity-90 hover:scale-105 transition-all shadow-soft",size:"sm",onClick:()=>{var D;return V({id:a.id,name:a.name,price:Number(a.price),quantity:1,shopId:a.shopId||"unknown",shopName:((D=a.shops)==null?void 0:D.name)||"Shop",imageUrl:a.imageUrl||"/images/products/default-product.jpg"})},children:"Add to Cart"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"checkbox",checked:M.includes(a.id),onChange:D=>H(ce=>D.target.checked?[...ce,a.id]:ce.filter(Ie=>Ie!==a.id))}),e.jsx("span",{children:"Compare"})]})]})]})})]},a.id)})})})]})]})]}),M.length>0&&e.jsxs("div",{className:"fixed bottom-4 inset-x-4 md:inset-x-auto md:right-4 md:w-[420px] p-3 rounded-xl border bg-background shadow-strong",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["Compare products (",M.length,")"]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>H([]),children:"Clear"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Open each in new tab to compare specs."}),e.jsx("div",{className:"flex gap-2 mt-2 overflow-x-auto",children:M.map(a=>e.jsxs(ee,{to:`/products/${a}`,className:"px-2 py-1 rounded border text-xs hover:bg-muted",children:["#",a]},a))})]})]})};export{Kt as default};
