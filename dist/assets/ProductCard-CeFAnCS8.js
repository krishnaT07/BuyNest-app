import{c as h,r as x,g as j,u as f,h as u,j as s,L as p,k as N,q as l,l as v,ae as y,B as b,m as k}from"./index-CErRD7Zr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=h("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),A=({product:e,shopName:o})=>{const[t,i]=x.useState(!1),{addToCart:c}=j(),{toast:r}=f(),{isInWishlist:d,toggleWishlist:m}=u(),g=async a=>{a.preventDefault(),a.stopPropagation(),i(!0);try{c({id:e.id,name:e.name,price:e.price,quantity:1,shopId:e.shopId,shopName:o||"Unknown Shop",imageUrl:e.imageUrl}),r({title:"Added to cart",description:`${e.name} has been added to your cart.`})}catch{r({title:"Error",description:"Failed to add item to cart.",variant:"destructive"})}finally{i(!1)}},n=e.originalPrice?Math.round((e.originalPrice-e.price)/e.originalPrice*100):0;return s.jsx(p,{to:`/products/${e.id}`,children:s.jsxs(N,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden rounded-t-lg",children:s.jsx("img",{src:e.imageUrl||"/images/products/default-product.jpg",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy",decoding:"async",onError:a=>{a.currentTarget.src="/images/products/default-product.jpg"}})}),n>0&&s.jsxs(l,{variant:"destructive",className:"absolute top-2 left-2",children:[n,"% OFF"]}),!e.inStock&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-t-lg",children:s.jsx(l,{variant:"secondary",className:"text-white bg-gray-800",children:"Out of Stock"})})]}),s.jsx(v,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"font-bold text-lg text-primary",children:["$",e.price]}),e.originalPrice&&s.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",e.originalPrice]})]}),e.weight&&s.jsx("span",{className:"text-xs text-muted-foreground",children:e.weight})]}),s.jsx("button",{"aria-label":"Toggle wishlist",onClick:a=>{a.preventDefault(),a.stopPropagation(),m({id:e.id,name:e.name,imageUrl:e.imageUrl,price:e.price})},className:`p-1 rounded ${d(e.id)?"text-red-500":"text-muted-foreground hover:text-foreground"}`,children:s.jsx(w,{className:"h-4 w-4"})})]})]})}),s.jsx(y,{className:"p-4 pt-0",children:s.jsx(b,{onClick:g,disabled:!e.inStock||t,className:"w-full",size:"sm",children:t?"Adding...":s.jsx(s.Fragment,{children:e.inStock?s.jsxs(s.Fragment,{children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}):"Out of Stock"})})})]})})};export{w as H,A as P};
