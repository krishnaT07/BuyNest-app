import{r as p,u as v,d as y,a1 as f,j as e,S as N,i as C,k as b,l as S,m as O,n as F,b as i,I as t,ad as D,ae as P,af as H,ag as w,ah as R,p as k,B as u,s as q}from"./index-DpajNjE9.js";import{T as _}from"./textarea-CFybK4Do.js";import{C as x}from"./checkbox-D4jd9mJ5.js";import{H as A}from"./Header-DaVMp61o.js";import{F as I}from"./Footer-DSr7la1m.js";import{L as M}from"./LocationInput-GMhYp9z9.js";import{D as E}from"./dollar-sign-v1OtmV21.js";import"./index-BtrTBpgd.js";import"./navigation-TkZlcdcl.js";const z=()=>{const[s,r]=p.useState({shopName:"",description:"",address:"",phone:"",email:"",category:"",openingHours:"",minimumOrder:"",deliveryRadius:"",acceptsOnlinePayment:!1,acceptsCashOnDelivery:!1}),[l,d]=p.useState(!1),{toast:o}=v(),c=y(),{user:m}=f(),g=["Grocery & Supermarket","Restaurant & Food","Pharmacy & Healthcare","Electronics & Mobile","Fashion & Clothing","Home & Garden","Books & Stationery","Sports & Fitness","Beauty & Personal Care","Other"],j=async a=>{if(a.preventDefault(),!m){o({title:"Authentication required",description:"Please log in to register your shop.",variant:"destructive"});return}if(!s.shopName||!s.category||!s.description||!s.address||!s.phone||!s.email||!s.openingHours){o({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"});return}d(!0);try{const n={id:`shop-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:s.shopName,description:s.description,address:s.address,phone:s.phone,email:s.email,opening_hours:s.openingHours,categories:[s.category],minimum_order:s.minimumOrder?parseFloat(s.minimumOrder):0,owner_id:m.id,is_open:!0,is_approved:!1,rating:0,review_count:0,delivery_time:"30-45 min",image_url:"/images/shops/default-shop.jpg"},{error:h}=await q.from("shops").insert(n);if(h)throw h;o({title:"Shop registered successfully!",description:"Your shop has been submitted for admin approval. You'll be notified once it's approved."}),c("/seller-dashboard?registered=true")}catch(n){console.error("Shop registration error:",n),o({title:"Registration failed",description:n.message||"Please try again later.",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(A,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Register Your Shop"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Join BuyNest and start selling to your local community"})]}),e.jsxs(C,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Shop Information"}),e.jsx(O,{children:"Please provide details about your business"})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"shopName",children:"Shop Name *"}),e.jsx(t,{id:"shopName",placeholder:"Enter your shop name",value:s.shopName,onChange:a=>r({...s,shopName:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"category",children:"Category *"}),e.jsxs(D,{onValueChange:a=>r({...s,category:a}),children:[e.jsx(P,{children:e.jsx(H,{placeholder:"Select category"})}),e.jsx(w,{children:g.map(a=>e.jsx(R,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Shop Description *"}),e.jsx(_,{id:"description",placeholder:"Describe your shop and what you sell...",value:s.description,onChange:a=>r({...s,description:a.target.value}),rows:3,required:!0})]}),e.jsx(M,{label:"Shop Address",value:s.address,onChange:a=>r({...s,address:a}),placeholder:"Enter your complete shop address",required:!0,rows:2,helperText:"Your shop's physical location for customers to find you"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(t,{id:"phone",type:"tel",placeholder:"+1 (555) 000-0000",value:s.phone,onChange:a=>r({...s,phone:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email Address *"}),e.jsx(t,{id:"email",type:"email",placeholder:"shop@example.com",value:s.email,onChange:a=>r({...s,email:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"openingHours",className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Opening Hours *"]}),e.jsx(t,{id:"openingHours",placeholder:"e.g., 9:00 AM - 9:00 PM",value:s.openingHours,onChange:a=>r({...s,openingHours:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"minimumOrder",className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Minimum Order ($)"]}),e.jsx(t,{id:"minimumOrder",type:"number",placeholder:"25",value:s.minimumOrder,onChange:a=>r({...s,minimumOrder:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"deliveryRadius",children:"Delivery Radius (miles)"}),e.jsx(t,{id:"deliveryRadius",type:"number",placeholder:"5",value:s.deliveryRadius,onChange:a=>r({...s,deliveryRadius:a.target.value})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{className:"text-base font-semibold",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:"onlinePayment",checked:s.acceptsOnlinePayment,onCheckedChange:a=>r({...s,acceptsOnlinePayment:a})}),e.jsx(i,{htmlFor:"onlinePayment",children:"Accept online payments (Card, UPI, etc.)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{id:"cashOnDelivery",checked:s.acceptsCashOnDelivery,onCheckedChange:a=>r({...s,acceptsCashOnDelivery:a})}),e.jsx(i,{htmlFor:"cashOnDelivery",children:"Accept cash on delivery"})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",className:"flex-1",onClick:()=>c("/"),children:"Cancel"}),e.jsx(u,{type:"submit",className:"flex-1",disabled:l,children:l?"Submitting...":"Register Shop"})]})]})})]})]})}),e.jsx(I,{})]})};export{z as default};
