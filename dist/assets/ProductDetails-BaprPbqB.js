"use client";
import{a8 as T,r,u as A,a5 as D,j as e,f as x,i as h,n as g,S as M,L as y,o as O,T as $,B as u,h as E}from"./index-C7_V5JWq.js";import{S as B}from"./separator-DHEMzE8V.js";import{H as p}from"./Header-LcFRmaEJ.js";import{F as j}from"./Footer-DtqQTw7U.js";import{M as q}from"./minus-CKZRvO90.js";import{P as z}from"./plus-CO9L5se6.js";import"./index-Mkei7zYV.js";import"./settings-JGNURzKf.js";const W=()=>{const{productId:c}=T(),[s,b]=r.useState(null),[i,w]=r.useState(null),[n,v]=r.useState(1),[S,P]=r.useState(!0),{toast:d}=A(),{addToCart:k}=D(),[f,C]=r.useState([]),[t,o]=r.useState({name:"",rating:5,comment:""});r.useEffect(()=>{(async()=>{try{const l={id:c,name:"Fresh Organic Bananas",description:"Premium quality organic bananas, perfectly ripe and sweet. Rich in potassium and essential nutrients. Perfect for breakfast, smoothies, or healthy snacking.",price:2.99,originalPrice:3.49,category:"Fruits & Vegetables",imageUrl:"/images/products/fruits/apple.jpg",inStock:!0,shopId:"shop1",sku:"BAN001",weight:"1 lb",nutritionInfo:{calories:105,protein:"1.3g",carbs:"27g",fiber:"3.1g",sugar:"14g"},createdAt:new Date,updatedAt:new Date},m={id:"shop1",name:"Fresh Mart Grocery",description:"Your neighborhood grocery store",address:"123 Main Street, Downtown",phone:"+1 (555) 123-4567",email:"info@freshmart.com",rating:4.5,reviewCount:128,openingHours:"8:00 AM - 10:00 PM",categories:["Grocery"],isOpen:!0,deliveryTime:"30-45 mins",minimumOrder:25,ownerId:"owner1",createdAt:new Date,updatedAt:new Date};b(l),w(m)}catch{d({title:"Error",description:"Failed to load product details.",variant:"destructive"})}finally{P(!1)}})()},[c,d]),r.useEffect(()=>{if(c){const a=localStorage.getItem("buynest_recent"),l=a?JSON.parse(a):[],m=[c,...l.filter(N=>N!==c)].slice(0,12);localStorage.setItem("buynest_recent",JSON.stringify(m))}},[c]);const I=()=>{!t.name.trim()||!t.comment.trim()||(C(a=>[{name:t.name,rating:Number(t.rating),comment:t.comment},...a]),o({name:"",rating:5,comment:""}),d({title:"Review submitted",description:"Thanks for your feedback!"}))},F=()=>{s&&i&&(k({id:s.id,name:s.name,price:s.price,quantity:n,shopId:s.shopId,shopName:i.name,imageUrl:s.imageUrl}),d({title:"Added to cart",description:`${n} ${s.name} added to your cart.`}))};if(S)return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(p,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})}),e.jsx(j,{})]});if(!s||!i)return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(p,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product not found"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"The product you're looking for doesn't exist."})]}),e.jsx(j,{})]});const R=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0;return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(p,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.imageUrl||"/images/products/default-product.jpg",alt:s.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",onError:a=>{a.currentTarget.src="/images/products/default-product.jpg"}})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"secondary",children:s.category}),s.inStock?e.jsx(x,{variant:"default",children:"In Stock"}):e.jsx(x,{variant:"destructive",children:"Out of Stock"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-3xl font-bold text-primary",children:["$",s.price]}),s.originalPrice&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["$",s.originalPrice]}),e.jsxs(x,{variant:"destructive",className:"text-xs",children:[R,"% OFF"]})]})]}),s.weight&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Weight: ",s.weight]})]}),e.jsx(B,{}),e.jsx(h,{children:e.jsx(g,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx(y,{to:`/shops/${i.id}`,className:"font-semibold hover:text-primary",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:i.rating})]}),e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),e.jsx("span",{children:i.deliveryTime})]})]})]})]})})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-semibold",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>v(Math.max(1,n-1)),disabled:n<=1,children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-4 py-2 min-w-[60px] text-center",children:n}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>v(n+1),children:e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsxs(u,{className:"w-full",size:"lg",onClick:F,disabled:!s.inStock,children:[e.jsx(E,{className:"h-5 w-5 mr-2"}),"Add to Cart - $",(s.price*n).toFixed(2)]})]}),s.nutritionInfo&&e.jsx(h,{children:e.jsxs(g,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Nutrition Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:["Calories: ",s.nutritionInfo.calories]}),e.jsxs("div",{children:["Protein: ",s.nutritionInfo.protein]}),e.jsxs("div",{children:["Carbs: ",s.nutritionInfo.carbs]}),e.jsxs("div",{children:["Fiber: ",s.nutritionInfo.fiber]}),e.jsxs("div",{children:["Sugar: ",s.nutritionInfo.sugar]})]})]})})]})]}),e.jsxs("div",{className:"mt-10 grid lg:grid-cols-2 gap-8",children:[e.jsx(h,{children:e.jsxs(g,{className:"p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Write a Review"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(Input,{placeholder:"Your name",value:t.name,onChange:a=>o({...t,name:a.target.value})}),e.jsx(Input,{type:"number",min:1,max:5,placeholder:"Rating (1-5)",value:t.rating,onChange:a=>o({...t,rating:Number(a.target.value)})})]}),e.jsx(Textarea,{placeholder:"Your review",value:t.comment,onChange:a=>o({...t,comment:a.target.value})}),e.jsx(u,{onClick:I,children:"Submit Review"})]})}),e.jsx(h,{children:e.jsxs(g,{className:"p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Customer Reviews"}),f.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No reviews yet."}):e.jsx("div",{className:"space-y-3",children:f.map((a,l)=>e.jsxs("div",{className:"p-3 rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("div",{className:"flex items-center gap-1 text-yellow-500 text-sm",children:Array.from({length:a.rating}).map((m,N)=>"★")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.comment})]},l))})]})})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Related Products"}),e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsxs(y,{to:`/products/${(s.id||"p")+"-"+a}`,className:"p-3 rounded border hover:bg-muted/30",children:[e.jsx("div",{className:"aspect-square bg-muted rounded mb-2"}),e.jsxs("p",{className:"text-sm",children:["You might also like #",a]})]},a))})]})]}),e.jsx(j,{})]})};export{W as default};
